<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Values Survey — Present & 2075</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
<script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
<style>
  :root {
    --primary: #007bff;
    --success: #28a745;
    --bg: #f3f5f9;
    --text: #333;
    --muted: #555;
    --card: #fff;
  }
  * { box-sizing: border-box; }
  body {
    font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
    background: var(--bg);
    color: var(--text);
    margin: 0;
    padding: 0 16px;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  h1 {
    text-align: center;
    margin: 30px 0 10px;
    font-size: 2rem;
    color: #222;
  }
  p.lead {
    text-align: center;
    max-width: 800px;
    color: var(--muted);
    line-height: 1.5;
    font-size: 1rem;
    margin: 0 0 2rem;
  }
  .plots {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 2rem;
    width: 100%;
    max-width: 1200px;
  }
  .plot-card {
    background: var(--card);
    border-radius: 16px;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
    padding: 1.25rem 1.25rem 1rem;
    width: 500px;
    max-width: 100%;
    text-align: center;
  }
  .plot-card h2 {
    color: var(--primary);
    font-size: 1.25rem;
    margin: 0 0 0.25rem;
  }
  .plot-card h2.future {
    color: var(--success);
  }
  .plot {
    width: 100%;
    height: 480px;
  }
  .values {
    font-weight: 500;
    margin-top: 0.5rem;
    font-size: 1.05rem;
  }
  .hint {
    font-size: 0.9rem;
    color: var(--muted);
    margin-top: 0.25rem;
  }
  form {
    margin: 1.5rem 0 0.5rem;
    text-align: center;
  }
  button {
    background-color: var(--primary);
    border: none;
    color: white;
    padding: 0.8rem 1.4rem;
    border-radius: 10px;
    font-size: 1rem;
    cursor: pointer;
    transition: background 0.2s ease, transform 0.05s ease-in-out;
  }
  button:hover { background-color: #0056b3; }
  button:active { transform: translateY(1px); }
  footer {
    margin: 24px 0 18px;
    font-size: 0.9rem;
    color: #666;
    text-align: center;
  }
  .sr-only {
    position: absolute !important;
    width: 1px; height: 1px;
    padding: 0; margin: -1px; overflow: hidden;
    clip: rect(0,0,0,0); white-space: nowrap; border: 0;
  }
</style>
</head>
<body>

<h1>Values Survey — Present Day vs Year 2075</h1>
<p class="lead">
  Click anywhere inside each triangle to set your balance across the three priorities below.
  The closer you click to a corner, the more you value that dimension. Then press “Submit”.
</p>

<div class="plots">
  <div class="plot-card">
    <h2>Present Day</h2>
    <div id="plot-present" class="plot" role="img" aria-label="Ternary plot for Present Day"></div>
    <div class="values" id="valuesPresent">Click inside the triangle to select your point.</div>
    <div class="hint">Economic Growth • Health & Wellbeing • Care for Climate</div>
  </div>

  <div class="plot-card">
    <h2 class="future">Year 2075</h2>
    <div id="plot-future" class="plot" role="img" aria-label="Ternary plot for Year 2075"></div>
    <div class="values" id="valuesFuture">Click inside the triangle to select your point.</div>
    <div class="hint">Economic Growth • Health & Wellbeing • Care for Climate</div>
  </div>
</div>

<form id="surveyForm" action="https://formspree.io/f/YOUR_FORM_ID" method="POST" novalidate>
  <!-- Present -->
  <input type="hidden" name="economic_present" id="econPresent">
  <input type="hidden" name="health_present" id="healthPresent">
  <input type="hidden" name="climate_present" id="climatePresent">

  <!-- Future -->
  <input type="hidden" name="economic_future" id="econFuture">
  <input type="hidden" name="health_future" id="healthFuture">
  <input type="hidden" name="climate_future" id="climateFuture">

  <button type="submit">Submit Both Responses</button>
</form>

<footer>© 2025 Digital Society Project — Interactive Values Survey</footer>

<script>
/**
 * Creates a dense, transparent clickable grid of ternary points so that
 * clicking anywhere inside the triangle fires a Plotly click event with a,b,c.
 * We then move the visible marker and write to hidden inputs.
 */

function generateTernaryGrid(sum = 100, step = 2) {
  const a = [], b = [], c = [];
  for (let A = 0; A <= sum; A += step) {
    for (let B = 0; B <= sum - A; B += step) {
      const C = sum - A - B;
      a.push(A);
      b.push(B);
      c.push(C);
    }
  }
  return { a, b, c };
}

function createTernaryPlot({
  plotId,
  displayId,
  econInputId,
  healthInputId,
  climateInputId,
  color
}) {
  const SUM = 100;
  const STEP = 2; // denser = easier to click anywhere (2% step ~1326 points)
  const grid = generateTernaryGrid(SUM, STEP);

  const selectedTrace = {
    type: "scatterternary",
    mode: "markers",
    name: "Your selection",
    a: [34],
    b: [33],
    c: [33],
    marker: { color, size: 12, symbol: 
